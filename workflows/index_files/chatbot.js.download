var logData = '';
var userIP = '';
var fname = '';
document.addEventListener("DOMContentLoaded", function() {
	var data = {

		chatinit: {
			title: ["Hello there! ðŸ‘‹ We appreciate your contact and interest in our services.", "I'm here to assist you. Please select the appropriate category that aligns with your needs, and we'll explore the optimal solutions for your requirements."],
			options: ["Contact Us", "Industries", "Services", "Career Opportunities"],
		},
		services: {
			title: ["Our commitment to providing the highest quality of service is why we offer a wide range of services to meet the needs of our clients.", "Select any of the services that are right for you."],
			options: ["Digital Transformation", "Application Lifecycle Management", "Project Management", "Internet Of Things (IoT)", "DevOps as a Service", "QA as a Service",
				"Product Engineering", "US Staffing & IT Consulting", "Enterprise Architecture", "Cloud Computing", "Data Science & Data Engineering",
				"Managed Services", "E-Commerce", "Security"
			],
		},

		homerefresh: {
			title: ["Hello there! ðŸ‘‹ We appreciate your contact and interest in our services.", "I'm here to assist you. Please select the appropriate category that aligns with your needs, and we'll explore the optimal solutions for your requirements."],
			options: ["Contact Us", "Industries", "Services", "Career Opportunities"]
		},
		learnmoreaboutus: {
			title: ["Excellent! Let's explore the avenue that aligns perfectly with your business requirements and delivers optimum advantages."],
			options: ["Contact Us", "Industries", "Services", "Career Opportunities"]
		},

		applicationlifecyclemanagement: {
			title: ["Cloud Destinations have a structured approach to manage the entire lifecycle of our applications, from inception to retirement "],
			explainmsg: "Discover the advantages of streamlined application development by choosing Cloud Destinations. Our Application Lifecycle Management (ALM) services provide a robust framework for software development, enabling faster development speed, enhanced agility, improved quality and compliance, and better employee support and customer satisfaction. Learn more about our ALM services to leverage these benefits.",
			url: {
				link: "https://clouddestinations.com/application-lifecycle.html",
			},
		},
		devopsasaservice: {
			title: ["At Cloud Destinations, we have fostered a culture of collaboration and automation, emphasizing the close partnership between development and operations teams. This approach enables us to achieve faster and more reliable software delivery for our clients."],
			explainmsg: "Prepare to transform your product development process with Cloud Destinations' DevOps as a Service system. Our team of skilled experts offers a wide range of services, encompassing cloud integration, CI/CD, containerization, and DevSecOps. With more than 10 years of experience in the IT industry, we deliver a proven approach to DevOps implementation and provide comprehensive consulting services.",
			url: {
				link: "https://clouddestinations.com/devops.html",
			},
		},
		qaasaservice: {
			title: ["At Cloud Destinations, we have a dedicated team of experts who are committed to ensuring the highest quality in our software development process. They carry out a range of testing and quality assurance activities to deliver reliable and top-notch software solutions."],
			explainmsg: "If you seek world-class quality standards in your software products, Cloud Destinations is the ideal choice. Our QA as a Service approach provides comprehensive testing solutions that guarantee your software meets user expectations and requirements. With our team of experienced QA professionals and transparent quotes, you can save time and resources while successfully achieving your software quality management objectives.",
			url: {
				link: "https://clouddestinations.com/Qa-as-service.html",
			},
		},
		projectmanagement: {
			title: ["Cloud Destinations have a defined process and tools to plan, execute, and monitor our software development projects, ensuring timely and successful delivery."],
			explainmsg: "Cloud Destinations offers project management services with industry standards and best practices. Certified project managers lead all phases of a project, optimizing resources and ensuring alignment with business strategy. Effective stakeholder management, proactive communication, and risk mitigation improve productivity, quality, and customer satisfaction.",
			url: {
				link: "https://clouddestinations.com/project-management.html",
			},
		},
		enterprisearchitecture: {
			title: ["We use the latest technologies and best practices to build secure, scalable, and resilient mobile apps.", "To assist you better, please select which service-oriented enterprise architecture that would benefit your organization."],
			options: ["Cloud Native", "Platform as a Service Enablement", "Modernization", "Mobile Development"]
		},
		cloudnative: {
			title: ["We appreciate your interest in our cloud-native solutions!"],
			explainmsg: "Cloud Destinations offers Enterprise Architecture solutions, specializing in Cloud Native, Platform as a Service, and Mobile Development. Our solutions adhere to the 12-factor principle, ensuring scalability, elasticity, resilience, and security. With top-tier mobile app development services and expertise in popular Enterprise Architecture Frameworks, we help businesses modernize their IT infrastructure and achieve strategic objectives.",
			url: {
				link: "https://clouddestinations.com/enterprise-architecture.html?name=cloudnative",
			},
		},
		platformasaserviceenablement: {
			title: ["Thank you for your interest in our PaaS technology."],
			explainmsg: "Cloud Destinations provides comprehensive PaaS solutions that streamline application development and deployment, allowing organizations to prioritize delivering value through their code. Our Enterprise Architecture solutions ensure standardization and optimization of IT projects to align with business objectives. Additionally, our world-class mobile app development services cater to your specific requirements. We specialize in popular Enterprise Architecture Frameworks such as TOGAF, FEAF, DoDAF, and Zachman Framework.",
			url: {
				link: "https://clouddestinations.com/enterprise-architecture.html?name=PlatformAsAService",
			},
		},
		modernization: {
			title: ["Thank you for embarking on our modernization journey. "],
			explainmsg: "This initiative focuses on transforming your legacy applications into modern, cloud-native, and agile solutions that align with your evolving business requirements. We are committed to assisting you in achieving a successful modernization process.",
			url: {
				link: "https://clouddestinations.com/enterprise-architecture.html?name=Modernization",
			},
		},
		mobiledevelopment: {
			title: ["Thank you for selecting our mobile development service."],
			explainmsg: "Cloud Destinations is your reliable partner for custom mobile application development, specializing in creating robust and secure enterprise applications that optimize corporate workflows. Our team is well-versed in addressing the challenges of testing, building automation, and seamlessly integrating apps into your business architecture, while adhering to legal constraints. Let us assist you in elevating your business with efficient and user-friendly mobile solutions.",
			url: {
				link: "https://clouddestinations.com/enterprise-architecture.html?name=MobileDevelopment",
			},
		},


		cloudcomputing: {
			title: ["Great! When it comes to selecting a cloud computing service for your organization", "which service do you believe would be the most beneficial in meeting your requirements?"],
			options: ["Cloud Neutral", "AWS", "GCP", "Azure"]
		},
		cloudneutral: {
			title: ["Thank you for selecting our cloud-neutral approach"],
			explainmsg: "At Cloud Destinations, we provide cloud consulting services that prioritize flexibility and prevent vendor lock-in. Our offerings encompass Multi-Cloud Architecture, seamless migration, component re-use, and robust Cloud Resilience and Security Policies. We support leading platforms such as AWS, Azure, and GCP, all offered with a convenient pay-as-you-go pricing model.",
			url: {
				link: "https://clouddestinations.com/cloud-computing.html#CloudNeutral",
			},
		},
		aws: {
			title: ["Thank you for expressing your interest in our AWS services!"],
			explainmsg: "AWS, being a comprehensive computing platform, offers a wide range of infrastructure, platform, and software services. At Cloud Destinations, we provide project management services for various AWS offerings, including EC2, Lambda, and more. Our services are designed to optimize IT costs, enhance scalability, ensure business continuity, and enable flexible work practices.",
			url: {
				link: "https://clouddestinations.com/cloud-computing.html#AWS",
			},
		},
		gcp: {
			title: ["We appreciate your interest in our GCP service offerings!"],
			explainmsg: "At Cloud Destinations, we provide comprehensive services on Google Cloud Platform (GCP), a reliable and versatile infrastructure solution. Our offerings include Compute Engine, Functions, and more, enabling our clients to enjoy seamless control, smooth migration without vendor lock-in, robustness, accessibility, security, standardized infrastructure, data accessibility from anywhere, and adherence to security and compliance requirements.",
			url: {
				link: "https://clouddestinations.com/cloud-computing.html#GCP",
			},
		},
		azure: {
			title: ["Thanks for choosing our azure platform"],
			explainmsg: "Azure is an open-source and flexible cloud platform that helps in development, service hosting, service management, and data storage. Our services include Virtual Machines, Functions, and more. We provide project management services for Azure services, ensuring a smooth deployment and maintenance process. Azure's services offer flexibility of virtualization without having to buy and maintain physical hardware, and its serverless solution allows you to save on costs and infrastructure maintenance.",
			url: {
				link: "https://clouddestinations.com/cloud-computing.html#Azure",
			},
		},

		internetofthingsiot: {
			title: ["We have implemented Internet of Things (IoT) technologies that enable us to collect, analyze, and utilize data from our physical devices and assets, driving innovation and efficiency"],
			explainmsg: "Unlock the Full Potential of IoT. Imagine connecting billions of devices to the internet, enhancing customer experience, optimizing resources, and gaining a competitive edge. With Cloud Destinations end-to-end IoT solutions, you can turn this dream into reality. Our comprehensive services, including IoT design and development, integration, analytics and management, and security, enable you to create seamless and secure connections between devices, data, and applications.",
			url: {
				link: "https://clouddestinations.com/internet-of-things.html",
			},
		},

		managedservices: {
			title: ["Great! for choosing our managed services.", "We have partnered with a managed services provider that delivers a wide range of IT services, including infrastructure management, network monitoring, and support, enabling us to focus on our core business activities."],
			options: ["Data Center Management", "Managed Service Desk", "Business Contiunity & Disaster Recovery", "Remote Network Operations Center"]
		},
		datacentermanagement: {
			title: ["Thanks for choosing our data center management"],
			explainmsg: "Cloud Destinations offers end-to-end IT services, from advisory to managed, for optimized infrastructure efficiency. We align your infrastructure with your business goals, reduce operational costs, and enhance security, integrity, and reliability.",
			url: {
				link: "https://clouddestinations.com/managed-services.html?name=DataCenterManagement",
			},
		},
		managedservicedesk: {
			title: ["Thanks for choosing our managed service desk"],
			explainmsg: "Our comprehensive IT solution provides 24/7 IT support, continuous monitoring, and a mature knowledge base to streamline the continuity of your process. Our predictable cost models reduce the risk of unbudgeted support costs, increase productivity, and boost end-user satisfaction.",
			url: {
				link: "https://clouddestinations.com/managed-services.html?name=24x7x365ManagedService",
			},
		},
		businesscontiunitydisasterrecovery: {
			title: ["Thanks for choosing business contiunity and disaster recovery "],
			explainmsg: "Cloud Destinations helps your business persist in a crisis with our resiliency synchronization, prioritization, continuity program design, and infrastructure audit and risk assessment. We ensure smooth IT operations, enable business continuity, and identify and address resiliency issues.",
			url: {
				link: "https://clouddestinations.com/managed-services.html?name=BusinessContinuity",
			},
		},
		remotenetworkoperationscenter: {
			title: ["Thanks for choosing our remote networko perations center"],
			explainmsg: " Our Centralized IT support hub provides patch management, antivirus support, device installation, updates and troubleshooting, firewall and network security software monitoring, attack detection, and network performance, optimization, and health reporting.",
			url: {
				link: "https://clouddestinations.com/managed-services.html?name=RemoteNetworkOperations",
			},
		},

		datasciencedataengineering: {
			title: ["Great! for data science and engineering services.", "We have a team of experts that apply data science and engineering techniques to derive insights and value from the vast amounts of data we collect, helping us make informed decisions and optimize our operations."],
			options: ["Business Intelligence", "Data Warehousing & DataLake", "ETL /ELT Development", "Artificial Intelligence", "Machine Learning"]
		},
		businessintelligence: {
			title: ["Thanks for choosing business intelligence service"],
			explainmsg: "Cloud Destinations provides BI services to enable structured, data-driven decision-making across an organization. With our expertise in integrating data from various sources, we extract insights using analytical methods. Our solutions cover BI platforms, data warehousing infrastructure, CPM, and analytics, benefitting clients with faster reporting, accurate analysis, sales forecasting, and optimization.",
			url: {
				link: "https://clouddestinations.com/managed-services.html?name=RemoteNetworkOperations",
			},
		},
		datawarehousingdatalake: {
			title: ["Thanks for choosing data warehousing and datalake"],
			explainmsg: "Our certified engineers create destination databases that centralize an enterprise's data from all source systems. We specialize in cloud data warehousing for better performance and optimal cost. With a wide range of tool knowledge, our data engineering team simplifies the architecture processes and provides results. Our data lake architecture enables businesses to gain insights from raw data, potentially triggering business questions. Trust in data quality is key to utilizing the data lake.",
			url: {
				link: "https://clouddestinations.com/managed-services.html?name=RemoteNetworkOperations",
			},
		},
		etleltdevelopment: {
			title: ["Thanks for choosing our etl / elt development service"],
			explainmsg: "Cloud Destinations, a strategic technical partner with Snaplogic and Matillion, offers high-end ETL/ELT tools expertise. Our engineers are experts in a range of ETL/ELT tools, including Talend, Informatica, Python, and Microsoft SSIS. We help organizations migrate and update their data from legacy systems using our specialized ETL/ELT services.",
			url: {
				link: "https://clouddestinations.com/managed-services.html?name=RemoteNetworkOperations",
			},
		},
		artificialintelligence: {
			title: ["Thanks for choosing our artificial intelligence service"],
			explainmsg: "Data engineering is a beautiful thing when done right. At Cloud Destinations, we create seamless data pipelines using AI and machine learning to optimize the BI process. With AI, we can automate repetitive data preparation tasks and contribute to augmented analytics, revolutionizing the BI process. Our clients benefit from cutting-edge AI analytics tools and solutions.",
			url: {
				link: "https://clouddestinations.com/managed-services.html?name=RemoteNetworkOperations",
			},
		},
		machinelearning: {
			title: ["Thanks for choosing machinelearning service"],
			explainmsg: "Data engineering is a beautiful thing when done right. At Cloud Destinations, we create seamless data pipelines using AI and machine learning to optimize the BI process. With AI, we can automate repetitive data preparation tasks and contribute to augmented analytics, revolutionizing the BI process. Our clients benefit from cutting-edge AI analytics tools and solutions.",
			url: {
				link: "https://clouddestinations.com/managed-services.html?name=RemoteNetworkOperations",
			},
		},

		digitaltransformation: {
			title: ["Thank you for selecting us as your digital transformation partner. We are excited to embark on this journey with you and help drive positive change in your organization."],
			explainmsg: "Unlock your organization's full potential with Cloud Destinations' expertise in digital transformation. Our range of transformational technologies, from AI to microservices, IoT to blockchain, can elevate your business to new heights. Experience benefits such as increased ROI, productivity, agility, transparency, and improved user experience. Our solutions are designed to future-proof your organization and give you a competitive advantage through data-driven insights.",
			url: {
				link: "https://clouddestinations.com/digital-transformation.html",
			},
		},

		ecommerce: {
			title: ["We help you simplify your e-commerce demands by providing a wide range of services, from website and store optimization to market data creation.", "Please choose the one that best meets your needs."],
			options: ["E-Commerce Enablement", "Development", "Payment Gateway Integrations", "WCAG Compliance"],
		},

		ecommerceenablement: {
			title: ["Thank you for choosing our E-commerce Enablement service. We're thrilled to join you on this digital journey, enhancing your online business with secure transactions, tailored shopping carts, and expert design for web and mobile applications."],
			explainmsg: "Our service facilitates online purchase orders and invoice submissions for web-based stores. Our skilled team designs web and mobile apps, emphasizing E-commerce enablement. We provide custom encryption with Secure Sockets Layer for secure transactions and tailored shopping carts aligned with your business and customers.",
			url: {
				link: "https://clouddestinations.com/e-commerce.html",
			},
		},
		Development: {
			title: ["Elevate your business with seamless E-commerce web development, hassle-free hosting, user-friendly apps, and promotion through PPC ads, SEO, and social media."],
			explainmsg: "Cloud Destinations offers essential E-commerce web development, optimizing user navigation and seamless purchases. Our experts provide hassle-free hosting, user-friendly app development, and tailored layouts for optimal customer experiences. Additional services include PPC ads, SEO implementation, and social media promotion.",
			url: {
				link: "https://clouddestinations.com/e-commerce.html",
			},
		},
		paymentgatewayintegrations: {
			title: ["Opt for our integrated payment gateways for seamless transactions. We prioritize security with encryption, verification, and advanced measures for your peace of mind."],
			explainmsg: "Cloud Destinations offers seamless payment processing systems that are easy, effective, and secure. Our comprehensive guide outlines step-by-step how Payment Gateways work, ensuring encryption, authorization, and advanced security measures. We integrate both hosted and integrated gateways for reliable payment services, prioritizing security with address verification, fingerprinting, and geolocation.",
			url: {
				link: "https://clouddestinations.com/e-commerce.html",
			},
		},
		wcagcompliance: {
			title: ["Enhance your website with WCAG guidelines for improved user experience, usability, customer satisfaction, and branding. Ensure accessibility and boost SEO metrics."],
			explainmsg: "At Cloud Destinations, we prioritize WCAG guidelines to elevate your website's user experience and usability. Our services ensure multisensory information, keyboard accessibility, user control, and SEO improvements, building usability and a strong brand presence for enhanced customer satisfaction.",
			url: {
				link: "https://clouddestinations.com/e-commerce.html",
			},
		},
		productengineering: {
			title: ["Engineering Your Product Development with Expert Product Engineers."],
			explainmsg: "Looking for a technology partner to take your organization to the next level? Look no further than Cloud Destinations. Our product engineering services help you bring your innovative ideas to life, accelerate product development, and enter new markets while reducing costs. With certified SMEs and domain experts, risk-free development, and best-in-class applications, we will help you stay ahead of the competition. Transform your product ideas into reality today.",
			url: {
				link: "https://clouddestinations.com/product-engineering.html",
			},
		},
		industries: {
			title: ["As your comprehensive IT partner, Cloud Destinations offers customized operational support, digital transformation, and cutting-edge technology solutions. Utilize our seasoned experts, flexible engagement models, and industry-focused solutions to drive growth and success in various domains.",
				"Kindly select the industries you wish to delve into more comprehensively."
			],
			options: ["Health Care", "Retail", "Life Science", "Technology", "Agriculture", "Food and Groceries"],
		},
		healthcare: {
			title: ["We value your decision to choose healthcare as your focus area, and we are committed to providing industry-focused solutions to support your goals."],
			explainmsg: "Cloud Destinations offers industry-focused solutions for reinventing healthcare systems, providing customizable end-to-end remote and on-site operational support across various IT domains. Our expertise in healthcare software development encompasses market research, productization of software ideas, architecture design, API integrations, UX/UI design, compliant software development, and support and maintenance.",
			url: {
				link: "https://clouddestinations.com/healthcare.html",
			},
		},
		retail: {
			title: ["We value your decision to partner with us in transforming your retail business and appreciate the opportunity to serve you with our extensive range of retail-focused solutions."],
			explainmsg: "At Cloud Destinations, we revolutionize retail businesses by creating impactful experiences that engage and delight customers. With expertise in healthcare software development, e-commerce solutions, supply chain management, data analytics, gamification, point-of-sale systems, marketing automation, CRM, and payment processing, we provide comprehensive and tailored services to meet the unique needs of retailers.",
			url: {
				link: "https://clouddestinations.com/retail.html",
			},
		},
		lifescience: {
			title: ["Thanks for choosing Cloud Destinations for your Life Sciences journey. Our advanced technologies and expert services will propel your success."],
			explainmsg: "Cloud Destinations revolutionizes Life Sciences through technology. Our scalable, secure infrastructure, powered by AI, data analytics, and automation, accelerates drug discovery, enhances clinical trials, and optimizes operations. Uncover growth opportunities, boost efficiency, and navigate disruptions in this rapidly evolving industry with our comprehensive range of IT solutions.",
			url: {
				link: "https://clouddestinations.com/life-science.html",
			},
		},
		technology: {
			title: ["We're delighted that you've chosen Cloud Destinations to be your technology partner. Your growth and success are our priority."],
			explainmsg: "Empower your growth through cutting-edge technologies. Cloud Destinations drives value creation and innovation, assisting IT firms in the technology industry with system integration services. Navigate the digital revolution, harness disruptive technologies like AI, AR/VR, blockchain, IoT, and more, for accelerated growth and success.",
			url: {
				link: "https://clouddestinations.com/technology.html",
			},
		},
		agriculture: {
			title: ["We're delighted that you've chosen Cloud Destinations to revolutionize your agricultural practices with technology. Our expert IT solutions enhance efficiency, from precision agriculture to supply chain management."],
			explainmsg: "Our solutions enhance efficiency and sustainability, offering precision agriculture, supply chain management, and agri-financing services. Together, we're pioneering a tech-driven farming revolution, harnessing real-time data, geofencing, climate forecasting, and more to elevate agricultural practices. Your journey towards innovation starts here.",
			url: {
				link: "https://clouddestinations.com/agriculture.html",
			},
		},
		foodandgroceries: {
			title: ["We're delighted that you've chosen Cloud Destinations to spearhead innovation in the food and grocery industry. "],
			explainmsg: "Our advanced solutions not only optimize operations but also elevate customer experiences and drive sales growth. Through our cloud-powered platforms, predictive analytics, and AI-driven tools, we are fully prepared to empower your business with efficiency, growth, and unparalleled success. Welcome to a transformative journey of tech-enabled enrichment in the food and grocery industry.",
			url: {
				link: "https://clouddestinations.com/food-and-groceries.html",
			},
		},

		careeropportunities: {
			title: ["We are truly honored that you have chosen our company as the destination for your career journey.Your decision to join Cloud Destinations is a testament to your commitment to growth and excellence. We are dedicated to providing you with an environment that fosters learning, innovation, and professional fulfillment. Together, we will embark on a path of continuous growth and success. Welcome to the Cloud Destinations family!"],
			apply: "To unlock your career journey!   ",
			url: {
				link: "https://clouddestinations.zohorecruit.in/jobs/Careers",
			},
		},
		usstaffingitconsulting: {
			title: ["US Staffing: Empowering Your Workforce with Skilled IT Consultants"],
			explainmsg: "Cloud Destinations is a reliable partner for top businesses looking to unlock the full potential of their organization with digital transformation. Select any of our services, including US staffing and IT consulting, to get access to the right talent with the necessary skills and experience to meet your business requirements",
			url: {
				link: "https://clouddestinations.com/US-staffing-consulting.html",
			},
		},
		contactus: {
			title: ["We're here to provide tailored solutions and support for your needs. To initiate a connection with our dedicated team and ensure personalized assistance.", "kindly share your first name."],
		},
		endconv: {
			title: ["Would you like to initiate a connection with us to explore further, or is there anything else you would like to discuss? We're here to assist you."],
			options: ["Connect with us", "Home"],
		},
		endchat: {
			title: ["Might you be interested in discovering more about our company and its services?"],
			options: ["Continue"],
		},
		connectwithus: {
			title: ["Thank you for expressing your interest in our services!", "Could you kindly provide us with your first name?"]
		},
		connectwithsales: {
			title: ["Before we proceed, may we kindly request some information to assist us in better serving you?", "Please, enter your first name!"]
		}
	};

	var cbot = document.getElementById("chat-box");
	var delay = 1500;

	var len1 = data.chatinit.title.length;
	var hasInteracted = localStorage.getItem("hasInteracted");

	if (hasInteracted) {
		data.chatinit.title = ["Welcome back!", "We provide various services in Cloud Destinations. Are you interested in further learning or connecting with us?"];
		data.chatinit.options = ["Learn more about us", "Connect with sales"];
	}

	function onChatbotInteraction() {
		localStorage.setItem("hasInteracted", true);
	}

	const initBtn = document.getElementById("init");
	const closeBtn = document.getElementById("close");
	const welcomeMsgContainer = document.getElementById("welcome-message-container");
	const welcomeMsg = document.getElementById("welcome-message");

	let isChatBotOpened = false;
	let isChatInitButtonClicked = false;
	let isCloseButtonClicked = false;

	initBtn.addEventListener("click", function() {
		if (!isChatInitButtonClicked) {
			isChatInitButtonClicked = true;
			welcomeMsgContainer.style.display = "none";
			document.getElementById("test").style.display = "block";
			initBtn.style.display = "none";
			closeBtn.style.display = "inline-block";
			initChat();
			isChatBotOpened = true;
			CreateSession();

			if (!isCloseButtonClicked) {
				isCloseButtonClicked = true;
			}
		}
	});

	closeBtn.addEventListener("click", function() {
		if (!isCloseButtonClicked) {
			isCloseButtonClicked = true;
			document.getElementById("test").style.display = "none";
			initBtn.style.display = "inline-block";
			closeBtn.style.display = "none";
			isChatBotOpened = false;
			setTimeout(function() {
				isCloseButtonClicked = false;
			}, 1000);
		}
	});

	welcomeMsgContainer.addEventListener("click", function() {
		if (!isChatBotOpened) {
			welcomeMsgContainer.style.display = "none";
			document.getElementById("test").style.display = "block";
			initBtn.style.display = "none";
			closeBtn.style.display = "inline-block";
			initChat();
			isChatBotOpened = true;
		}
	});

	window.addEventListener("DOMContentLoaded", function() {
		var initButton = document.getElementById("init");
		if (initButton) {
			initButton.style.display = "none";
		}
	});

	window.addEventListener("load", function() {
		const hasInteracted = localStorage.getItem("hasInteracted");
		const welcomeMsgContainer = document.getElementById("welcome-message-container");
		const welcomeMsg = document.querySelector(".welcome-message");
		const initButton = document.getElementById("init");

		if (hasInteracted) {
			welcomeMsg.innerHTML = "Welcome! ðŸ‘‹ How may I assist you with our services today?";
		} else {
			welcomeMsg.innerHTML = "Hello!ðŸ‘‹ How can I help you explore the range of services our company provides?";
		}

		setTimeout(function() {
			welcomeMsgContainer.style.display = "block";
		}, 2000);

		setTimeout(function() {
			initButton.style.display = "block";
		}, 1500);
	});

	initBtn.addEventListener("click", function() {
		localStorage.setItem("hasInteracted", true);

		if (!isChatBotOpened) {
			welcomeMsgContainer.style.display = "none";
			document.getElementById("test").style.display = "block";
			initBtn.style.display = "none";
			closeBtn.style.display = "inline-block";
			initChat();
			isChatBotOpened = true;
		}
	});

	welcomeMsgContainer.addEventListener("click", function() {
		localStorage.setItem("hasInteracted", true);

		if (!isChatBotOpened) {
			welcomeMsgContainer.style.display = "none";
			document.getElementById("test").style.display = "block";
			initBtn.style.display = "none";
			closeBtn.style.display = "inline-block";
			initChat();
			isChatBotOpened = true;
		}
	});

	closeBtn.addEventListener("click", function() {
		document.getElementById("test").style.display = "none";
		initBtn.style.display = "inline-block";
		closeBtn.style.display = "none";
		isChatBotOpened = false;
	});

	welcomeMsgContainer.addEventListener("click", function() {
		if (!isChatBotOpened) {
			welcomeMsgContainer.style.display = "none";
			document.getElementById("test").style.display = "block";
			initBtn.style.display = "none";
			closeBtn.style.display = "inline-block";
			initChat();
			isChatBotOpened = true;
		}
	})
	window.addEventListener("DOMContentLoaded", function() {
		var initButton = document.getElementById("init");
		if (initButton) {
			initButton.style.display = "none";
		}
	});

	window.addEventListener("load", function() {
		const hasInteracted = localStorage.getItem("hasInteracted");
		const welcomeMsgContainer = document.getElementById("welcome-message-container");
		const welcomeMsg = document.querySelector(".welcome-message");
		const initButton = document.getElementById("init");

		if (hasInteracted) {
			welcomeMsg.innerHTML = "Welcome! ðŸ‘‹ How may I assist you with our services today?";
		} else {
			welcomeMsg.innerHTML = "Hello!ðŸ‘‹ How can I help you explore the range of services our company provides?";
		}

		setTimeout(function() {
			welcomeMsgContainer.style.display = "block";
		}, 2000);

		setTimeout(function() {
			initButton.style.display = "block";
		}, 1500);
	});

	initBtn.addEventListener("click", function() {
		localStorage.setItem("hasInteracted", true);

		if (!isChatBotOpened) {
			welcomeMsgContainer.style.display = "none";
			document.getElementById("test").style.display = "block";
			initBtn.style.display = "none";
			closeBtn.style.display = "inline-block";
			initChat();
			isChatBotOpened = true;
		}
	});

	welcomeMsgContainer.addEventListener("click", function() {
		localStorage.setItem("hasInteracted", true);

		if (!isChatBotOpened) {
			welcomeMsgContainer.style.display = "none";
			document.getElementById("test").style.display = "block";
			initBtn.style.display = "none";
			closeBtn.style.display = "inline-block";
			initChat();
			isChatBotOpened = true;
		}
	});

	closeBtn.addEventListener("click", function() {
		document.getElementById("test").style.display = "none";
		initBtn.style.display = "inline-block";
		closeBtn.style.display = "none";
		isChatBotOpened = false;
	});

	function minimizeChatbox() {
		var chatboxContainer = document.getElementById("test");
		chatboxContainer.style.display = "none";
		document.getElementById("init").style.display = "block";
		document.getElementById("close").style.display = "none";
		document.getElementById("init").classList.add("blink");
	}

	function maximizeChatbox() {
		var chatboxContainer = document.getElementById("test");
		chatboxContainer.style.display = "block";
		document.getElementById("init").style.display = "none";
		document.getElementById("close").style.display = "inline-block";
		document.getElementById("init").classList.remove("blink");
	}

	document.getElementById("minimize").addEventListener("click", function() {
		minimizeChatbox();
	});

	document.getElementById("init").addEventListener("click", function() {
		maximizeChatbox();
	});

	function removeBlinkClass() {
		document.getElementById("init").classList.remove("blink");
	}
	let isButtonClicked = false;
	document.getElementById("init").addEventListener("transitionend", removeBlinkClass);
	document.querySelector(".refBtn").addEventListener("click", function() {
		if (!isButtonClicked) {
			isButtonClicked = true;
			isHomerefresh = true;
			initChat();

			const inputBox = document.getElementById("message-input");
			const sendButton = document.getElementById("send-button");
			inputBox.value = "";
			inputBox.setAttribute("placeholder", "");
			sendButton.style.filter = "none";
			sendButton.style.cursor = "none";
			sendButton.setAttribute("disabled", "disabled");
			initializeConversation(sendButton);
			setTimeout(function() {
				isButtonClicked = false;
			}, 3000);
		}
	});

	var j = 0;
	var isHomerefresh = false;

	function initChat() {
		j = 0;
		cbot.innerHTML = "";
		var dataToUse = isHomerefresh ? data.homerefresh : data.chatinit;
		len1 = dataToUse.title.length;
		for (var i = 0; i < len1; i++) {
			setTimeout(handleChat, i * 1000, dataToUse.title[i], i === 0);
		}
		setTimeout(function() {
			showOptions(dataToUse.options);
		}, (len1 + 1) * 1000);

		const inputBox = document.getElementById("message-input");
		const sendButton = document.getElementById("send-button");
		inputBox.setAttribute("disabled", "disabled");
		sendButton.setAttribute("disabled", "disabled");
	}

	function handleChat(title, isFirst) {
		var msgContainer = createMessageContainer();

		if (isFirst) {
			var icon = document.createElement("img");
			icon.setAttribute("src", "chatbot/images/msgicon.png");
			icon.setAttribute("class", "chatbot-icon");
			msgContainer.appendChild(icon);
		}

		var msg = document.createElement("p");
		msg.innerHTML = title.charAt(0).toUpperCase() + title.slice(1);
		msg.setAttribute("class", "msg");
		msgContainer.appendChild(msg);

		setTimeout(function() {
			var timestamp = document.createElement("span");
			timestamp.innerHTML = getCurrentTime();
			timestamp.setAttribute("class", "timestamp");
			msgContainer.appendChild(timestamp);

			addHoverBehavior(msgContainer, timestamp);

			cbot.appendChild(msgContainer);
			j++;
			handleScroll();
		}, delay);
	}

	var firstResponse = true;

	function createMessageContainer() {
		var msgContainer = document.createElement("div");
		msgContainer.setAttribute("class", "msg-container");
		return msgContainer;
	}

	function addHoverBehavior(container, timestamp) {
		container.addEventListener("mouseover", function() {
			timestamp.style.visibility = "visible";
		});

		container.addEventListener("mouseout", function() {
			timestamp.style.visibility = "hidden";
		});
	}

	function getCurrentTime() {
		var date = new Date();
		var hours = date.getHours();
		var minutes = date.getMinutes();
		var ampm = hours >= 12 ? "pm" : "am";

		hours = hours % 12;
		hours = hours ? hours : 12;

		hours = hours < 10 ? " " + hours : hours;
		minutes = minutes < 10 ? "0" + minutes : minutes;

		var currentTime = hours + ":" + minutes + " " + ampm;
		return currentTime;
	}

	function showOptions(options) {
		if (!options) {
			return;
		}

		var optionContainer = document.createElement("div");
		optionContainer.classList.add("option-container");

		for (var i = 0; i < options.length; i++) {
			var opt = document.createElement("span");
			opt.innerHTML = options[i];
			opt.setAttribute("class", "opt");
			opt.addEventListener("click", handleOpt);
			optionContainer.appendChild(opt);
		}

		cbot.appendChild(optionContainer);
		handleScroll();
	}

	function openLink(link) {
		var chatContainer = document.getElementById("chat-container");
		var iframe = document.createElement("iframe");
		iframe.src = link;
		iframe.style.width = "100%";
		iframe.style.height = "100%";
		iframe.style.border = "none";
		chatContainer.innerHTML = "";
		chatContainer.appendChild(iframe);
	}

	var userActions = [];

	function trackUserAction(action) {
		var actionText = action.toLowerCase().trim();
		if (actionText !== "Connect with us") {
			userActions.push(actionText);
		}
	}

	function handleOpt() {
		var str = this.innerText;
		var textArr = str.toLowerCase().replace(/[\W_|\s]+/g, "");
		var findText = textArr;
		trackUserAction(str);
		var sample = updateFile(str);

		document.querySelectorAll(".opt").forEach((el) => {
			el.remove();
		});

		if (findText.toLowerCase() === "home" || findText.toLowerCase() === "continue") {
			isHomerefresh = true;
			initChat();
			const inputBox = document.getElementById("message-input");
			const sendButton = document.getElementById("send-button");
			inputBox.removeAttribute("placeholder");

			// inputBox.setAttribute("placeholder");
			sendButton.style.filter = "none";
			sendButton.style.cursor = "none";
		} else {

			var elm = document.createElement("p");
			elm.setAttribute("class", "test");
			var sp = '<span class="rep">' + this.innerText + '</span><img src="chatbot/images/user.svg" class="user-icon">';
			elm.innerHTML = sp;
			cbot.appendChild(elm);
			const inputBox = document.getElementById("message-input");
			const sendButton = document.getElementById("send-button");

			if (
				findText.toLowerCase() === "connectwithus" ||
				findText.toLowerCase() === "connectwithsales" ||
				findText.toLowerCase() === "contactus"
			) {
				inputBox.removeAttribute("disabled");
				sendButton.removeAttribute("disabled");
				inputBox.setAttribute("placeholder", "Type a message . . .");
				sendButton.style.filter = "invert(48%) sepia(13%) saturate(7007%) hue-rotate(170deg) brightness(95%) contrast(80%)";
				sendButton.style.cursor = "pointer";
				initializeConversation(sendButton);
			} else {
				inputBox.setAttribute("disabled", "disabled");
				sendButton.setAttribute("disabled", "disabled");
				inputBox.removeAttribute("placeholder");
				sendButton.style.filter = "none";
				sendButton.style.cursor = "none";
			}

			var tempObj = data[findText.toLowerCase()];
			console.log(tempObj);
			console.log(str);
			handleUserResponse(tempObj);
		}
	}

	function initializeConversation(sendButton) {
		var userInfo = {
			firstName: "",
			lastName: "",
			email: ""
		};

		var conversation = document.getElementById("chat-box");
		var messageInput = document.getElementById("message-input");

		sendButton.addEventListener("click", handleUserInput);

		messageInput.addEventListener("keydown", function(event) {
			if (event.keyCode === 13) {
				event.preventDefault();
				if (!sendButton.disabled) {
					handleUserInput();
				}
			}
		});

		function handleUserInput() {
			var input = messageInput.value.trim();
			if (input !== "") {
				if (userInfo.firstName === "") {
					if (isValidAlphabetInput(input)) {
						userInfo.firstName = capitalizeFirstLetter(input);
						showMessage(userInfo.firstName, true);
						showMessage(
							"Thank you, " + userInfo.firstName + "! Please enter your last name.",
							false
						);
						messageInput.value = "";
					} else {
						showMessage(input, true);
						showMessage("Please enter a valid first name.", false);
						messageInput.value = "";
					}
				} else if (userInfo.lastName === "") {
					if (isValidAlphabetInput(input)) {
						userInfo.lastName = capitalizeFirstLetter(input);
						showMessage(userInfo.lastName, true);
						showMessage(
							"Great " + userInfo.firstName + " " + userInfo.lastName + "! Please enter your business / personal email address.",
							false
						);
						messageInput.value = "";
					} else {
						showMessage(input, true);
						showMessage("Please enter a valid last name.", false);
						messageInput.value = "";
					}
				} else if (userInfo.email === "" || (response && response.message !== "duplicate_email")) {
					if (validateEmail(input)) {
						userInfo.email = input;
						showMessage(userInfo.email, true);
						messageInput.value = "";
						getCSRFToken();

					} else {
						showMessage(input, true);
						showMessage("Sorry, I didn't understand that. I need a valid business / personal email address.", false);
						messageInput.value = "";
					}
				} else {
					trackUserAction(input);
				}
			}
			handleScroll();
		}

		function isValidAlphabetInput(input) {
			return /^[a-zA-Z]+$/.test(input);
		}

		function capitalizeFirstLetter(string) {
			return string.charAt(0).toUpperCase() + string.slice(1);
		}

		function validateEmail(email) {
			var emailInput = document.createElement("input");
			emailInput.setAttribute("type", "email");
			emailInput.value = email;
		
			if (emailInput.checkValidity()) {
				var parts = email.split("@");
				if (parts.length === 2) {
					var username = parts[0];
					var domain = parts[1];
					var domainParts = domain.split(".");
		
					if (username.length <= 20) {
						var domainName = domainParts[0];
						var domainExtension = domainParts[1];
						var validExtensions = ["com", "net", "co", "biz", "org", "in"];
		
						if (
							domainName.length >= 5 &&
							validExtensions.includes(domainExtension)
						) {
							return true;
						}
					}
				}
			}
			return false;
		}
		
		function getCSRFToken() {
			var xhr = new XMLHttpRequest();
			xhr.open("GET", "https://clouddestinations.com/chatbot_api/get_csrf_token", true);
			xhr.setRequestHeader("Content-Type", "application/json");
		
			xhr.onreadystatechange = function () {
				if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
					var response = JSON.parse(xhr.responseText);
					var csrfToken = response.csrf_token;		
					sendEmail(userInfo, csrfToken);
				}
			};
			xhr.send();
		}
		

		function sendEmail(userInfo, csrfToken) {
			var xhr = new XMLHttpRequest();
			xhr.open("POST", "https://clouddestinations.com/chatbot_api/send_email", true);
			xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
			xhr.setRequestHeader("X-CSRFToken", csrfToken);		

			xhr.onreadystatechange = function () {
				if (xhr.readyState === XMLHttpRequest.DONE) {	
					if (xhr.status === 200) {
						var response = JSON.parse(xhr.responseText);
						if (response.message === "duplicate_email") {
							showMessage("You have already sent an email, and your information is in our database.", false);
						} else {
							showMessage("Got it, " + userInfo.firstName + " " + userInfo.lastName + "! We have received your email address. We will get back to you.", false);
						}
					} else {
						showMessage("Failed to send email. Error: " + xhr.statusText, false); 
					}
					setTimeout(function () {
						var endchat = data.endchat;
						var endchatTitle = endchat.title;
						var endchatOptions = endchat.options;
						handleResults(endchatTitle, endchatOptions, null, false);
					}, 2000);
					handleScroll();
				}
			};
			var message = "firstName=" + encodeURIComponent(userInfo.firstName);
			message += "&lastName=" + encodeURIComponent(userInfo.lastName);
			message += "&email=" + encodeURIComponent(userInfo.email);
		
			if (userActions.length > 0) {
				message += "&userActions=" + encodeURIComponent(userActions.join(', '));
			}
			xhr.send(message);
			console.log("send");
		}
		console.log("All User Actions:", userActions);	

		function showMessage(cbot, isUser = false) {
			function createMessageContainer() {
				var msgContainer = document.createElement("div");
				msgContainer.setAttribute("class", "msg-container");
				return msgContainer;
			}

			var messageContainer;
			if (isUser) {
				messageContainer = document.createElement("span");
				messageContainer.setAttribute("class", "rep");
			} else {
				messageContainer = createMessageContainer();
			}
			messageContainer.innerText = cbot;

			if (isUser) {
				var repContainer = document.createElement("p");
				repContainer.setAttribute("class", "test");

				var userIcon = document.createElement("img");
				userIcon.setAttribute("src", "chatbot/images/user.svg");
				userIcon.setAttribute("class", "user-icon");
				repContainer.appendChild(messageContainer);
				repContainer.appendChild(userIcon);

				conversation.appendChild(repContainer);
			} else {
				var msgContainer = createMessageContainer();

				var botIcon = document.createElement("img");
				botIcon.setAttribute("src", "chatbot/images/msgicon.png");
				botIcon.setAttribute("class", "chatbot-icon");

				var messageWrapper = document.createElement("p");
				messageWrapper.setAttribute("class", "msg");
				messageWrapper.appendChild(messageContainer);

				msgContainer.appendChild(messageWrapper);
				msgContainer.appendChild(botIcon);

				conversation.appendChild(msgContainer);

				var timestamp = document.createElement("span");
				timestamp.innerHTML = getCurrentTime();
				timestamp.setAttribute("class", "timestamp");
				msgContainer.appendChild(timestamp);
				addHoverBehavior(msgContainer, timestamp);
			}

			handleScroll();
		}

		function collectUserInformation(option) {
			if (option === "connectwithus") {
				showMessage("Thank you! Please enter your first name.");
			} else if (option === "iwanttoconnectwithsales") {
				showMessage("Thank you! Please enter your first name.");
			} else if (option === "contacts") {
				showMessage("Thank you! Please enter your message.");
			}
		}

		document.querySelectorAll(".opt").forEach(function(option) {
			option.addEventListener("click", function() {
				var optionText = option.innerText.toLowerCase().replace(/[\W_|\s]+/g, "");
				collectUserInformation(optionText);
			});
		});
	}

	function handleUserResponse(tempObj) {
		if (tempObj.title && tempObj.title.length > 0) {
			handleResults(tempObj.title, tempObj.options, tempObj.url);

			if (tempObj.url && tempObj.url.link) {
				setTimeout(function() {
					var msgContainer = document.createElement("div");
					var msg = document.createElement("p");

					var linkText = tempObj.explainmsg || tempObj.apply;
					var linkType = tempObj.explainmsg ? "know more" : "apply";
					msg.innerHTML = linkText + ' <a href="' + tempObj.url.link + '" target="_blank">Click here to ' + linkType + '</a>';
					msg.setAttribute("class", "msg");
					msgContainer.appendChild(msg);
					msgContainer.setAttribute("class", "msg-container");
					cbot.appendChild(msgContainer);
					handleScroll();

					var timestamp = document.createElement("span");
					timestamp.innerHTML = getCurrentTime();
					timestamp.setAttribute("class", "timestamp");
					msgContainer.appendChild(timestamp);
					addHoverBehavior(msgContainer, timestamp);

					setTimeout(function() {
						var endconv = data.endconv;
						var endconvTitle = endconv.title;
						var endconvOptions = endconv.options;
						handleResults(endconvTitle, endconvOptions, tempObj.url, false);
					}, 4100);
				}, tempObj.title.length * 1000);
			}
		}
		handleScroll();
	}

	function handleResults(title, options, url, displayIcon = true) {
		var iconDisplayed = false;
		var borderRadius = "20px";
		var increment = 2;

		if (title && title.length > 0) {
			for (let i = 0; i < title.length; i++) {
				setTimeout(function() {
					var msgContainer = createMessageContainer();
					msgContainer.style.borderRadius = borderRadius;

					if (!iconDisplayed && displayIcon) {
						var icon = document.createElement("img");
						icon.setAttribute("src", "chatbot/images/msgicon.png");
						icon.setAttribute("class", "chatbot-icon");
						msgContainer.appendChild(icon);
						iconDisplayed = true;
					}

					var msg = document.createElement("p");
					msg.innerHTML = title[i];
					msg.setAttribute("class", "msg");
					msgContainer.appendChild(msg);

					var timestamp = document.createElement("span");
					timestamp.innerHTML = getCurrentTime();
					timestamp.setAttribute("class", "timestamp");
					msgContainer.appendChild(timestamp);

					addHoverBehavior(msgContainer, timestamp);

					cbot.appendChild(msgContainer);
					handleScroll();

					borderRadius = parseInt(borderRadius) + increment + "px";

					if (i > 0 && displayIcon && icon) {
						icon.style.visibility = "hidden";
					}
				}, i * 1000);
			}
			setTimeout(function() {
				showOptions(options, url);
			}, title.length * 1000);
		} else {
			showOptions(options, url);
		}
	}

	function createMessageContainer() {
		var msgContainer = document.createElement("div");
		msgContainer.setAttribute("class", "msg-container");
		return msgContainer;
	}

	function addHoverBehavior(container, timestamp) {
		container.addEventListener("mouseover", function() {
			if (timestamp) {
				timestamp.style.visibility = "visible";
			}
		});

		container.addEventListener("mouseout", function() {
			if (timestamp) {
				timestamp.style.visibility = "hidden";
			}
		});
	}

	function handleDelay(title) {
		var elm = document.createElement("p");
		elm.innerHTML = title;
		elm.setAttribute("class", "msg");
		cbot.appendChild(elm);
	}

	function handleOptions(options, url) {
		for (var i = 0; i < options.length; i++) {
			var opt = document.createElement("span");
			var inp = '<a class="m-link">' + options[i] + "</a>";
			if (url && url.link && url.link[i]) {
				inp = '<a class="m-link" href="' + url.link[i] + '">' + options[i] + "</a>";
				inp += '<a class="m-button" href="' + url.link[i] + '">Know More</a>';
			}
			var opt = document.createElement("span");
			opt.innerHTML = inp;
			opt.setAttribute("class", "opt");
			cbot.appendChild(opt);
			handleScroll();
		}
		const isObjectEmpty = (url) => {
			return JSON.stringify(url) === "{}";
		};

		opt.innerHTML = inp;
		opt.setAttribute("class", "opt link");
		cbot.appendChild(opt);
		handleScroll();
	}

	function handleScroll() {
		var elem = document.getElementById("chat-box");
		elem.scrollTop = elem.scrollHeight;
	}

	function CreateSession() {
		var today = new Date();
		sessionStorage.setItem("Session-For-Bot", today.valueOf());
		fetch('https://api.ipify.org?format=json')
			.then(response => response.json())
			.then(data => {
				userIP = data.ip;
			})
			.catch(error => {
				console.error("Error getting IP address:", error);
			});
	}
	const url = 'https://clouddestinations.com/chatbot/updateFile';
	const jwtToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjYsInVzZXJuYW1lIjoiY2hhdGJvdCIsImlhdCI6MTY5NzYyOTA5MH0.g7AEgdRzt1S2QfZFUJxmj4wJ83JRKmaxhuVR_2phR_Y';

	function updateFile(findText) {
		var content = consoleLog(findText)
		const data = {
			"content": content
		};
		fetch(url, {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
					'Authorization': `${jwtToken}`
				},
				body: JSON.stringify(data)
			})
			.then(response => response.json())
			.then(result => {
			})
			.catch(error => {
				console.error('Error:', error);
			});
	}

	function consoleLog(message) {
		var today = new Date();
		var date = today.getFullYear() + '/' + (today.getMonth() + 1) + '/' + today.getDate();
		var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
		var dateTime = date + ' ' + time;
		var username = sessionStorage.getItem("Session-For-Bot");
		logData = dateTime + '||' + username + '||' + userIP + '||' + message + '\r\n';
		return logData
	}	
});